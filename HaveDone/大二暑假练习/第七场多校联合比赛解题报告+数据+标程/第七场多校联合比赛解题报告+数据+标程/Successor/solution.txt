线段树

题意是要找某个点其子孙中能力值其能力值的中忠诚度最大的。
首先可以遍历一遍将树上每个点标记为一维区间上的某个点，且在同一棵子树内的点是连续的一段。
将所有点按忠诚度从大到小排序，忠诚度相同的编号小的排在前面，然后扫描一遍，扫描时维护一颗线段树，先查找该点为根节点的子树内的最优值，然后插入该点的忠诚度。