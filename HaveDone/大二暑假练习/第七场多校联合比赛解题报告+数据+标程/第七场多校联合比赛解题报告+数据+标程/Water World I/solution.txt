几何

题目给出n个柱子一字排开,并且整体倾斜angle角度.向左为正,向右为负.
为使考虑简单,当angle为负时,将n个柱子颠倒顺序,angle取绝对值,得到的结果实际上是一样的.因此只需考虑向左倾斜
同时,为了避免大量坐标变换,柱子倾斜,其实就是地平线\水平面倾斜,因此,柱子不变,柱子左下角设为原点.从原点往右下角拉一条线出来作为倾斜的地平线.

   *
   *  *
 * * **
 ******
*******
\  
 \  -angle
  \
   \

接下来,计算每根柱子顶端与地平线的最大垂直距离.那么,水体肯定在2根距离较高的,柱子中间.称这2根柱子匹配
找到距离最大的柱子,那么,对于左侧的柱子,肯定与右边最近的,与地平线距离大于等于本身的柱子相匹配.对于右侧的柱子,肯定与左边某柱子匹配.因此做向左向右两次循环即可找出所有匹配.

此时,问题和求没有倾斜时的蓄水量一样了,2种做法
  1.利用普通循环,i为当前扫描的柱子,j从i+1到maxi循环,找到第一个大于等于柱子i的,即找到匹配i->j.复杂度O(n)
  2.从最高柱开始扫描,维护单调栈,stack[top-1]是当前柱子高度,stack[top-2]是前面大于等于当前柱子高度的最近的柱子.左右扫描一遍后,就可以得到当前柱子的匹配柱编号 右侧prev[i] 左侧next[i].
  因为柱子不会移动,用第1种更简单也更快.


接下来计算i 和 prev[i] 2个匹配柱之间的装水量.2个柱子之间可以确定水平面连线,计算每条柱子和线之间有多少面积即可.
因为倾斜角固定,因此对于每根柱子,水平面的下降高度是一样的,水柱都是由一段长方体+顶部三角形组成,顶部三角形面积也是固定的.因此,不需要用到复杂的计算公式,直接加面积即可.要特判一下,有的柱子,顶部的三角形水体只有一部分,计算方式不一样,并且,当角度为0时,避免出现计算异常.

复杂度O(n)